From cb18d362243bd7838c91360c15359d18c581063f Mon Sep 17 00:00:00 2001
From: "H. Vetinari" <h.vetinari@gmx.com>
Date: Mon, 22 Sep 2025 09:48:20 -0500
Subject: [PATCH 11/16] remove `DESTINATION lib` from CMake `install(TARGETS` 
 directives

Suggested-By: Silvio Traversaro <silvio@traversaro.it>
---
 c10/CMakeLists.txt                      | 2 +-
 c10/cuda/CMakeLists.txt                 | 2 +-
 c10/hip/CMakeLists.txt                  | 2 +-
 c10/xpu/CMakeLists.txt                  | 2 +-
 torch/lib/libshm_windows/CMakeLists.txt | 2 +-
 5 files changed, 5 insertions(+), 5 deletions(-)

diff --git a/c10/CMakeLists.txt b/c10/CMakeLists.txt
index 8e9d267352d..6c4a4472325 100644
--- a/c10/CMakeLists.txt
+++ b/c10/CMakeLists.txt
@@ -164,7 +164,7 @@ if(NOT BUILD_LIBTORCHLESS)
   # Note: for now, we will put all export path into one single Caffe2Targets group
   # to deal with the cmake deployment need. Inside the Caffe2Targets set, the
   # individual libraries like libc10.so and libcaffe2.so are still self-contained.
-  install(TARGETS c10 EXPORT Caffe2Targets DESTINATION lib)
+  install(TARGETS c10 EXPORT Caffe2Targets)
 endif()
 
 install(DIRECTORY ${CMAKE_CURRENT_LIST_DIR}
diff --git a/c10/cuda/CMakeLists.txt b/c10/cuda/CMakeLists.txt
index 2604f677858..dcad42167ea 100644
--- a/c10/cuda/CMakeLists.txt
+++ b/c10/cuda/CMakeLists.txt
@@ -83,7 +83,7 @@ if(NOT BUILD_LIBTORCHLESS)
 # Note: for now, we will put all export path into one single Caffe2Targets group
 # to deal with the cmake deployment need. Inside the Caffe2Targets set, the
 # individual libraries like libc10.so and libcaffe2.so are still self-contained.
-install(TARGETS c10_cuda EXPORT Caffe2Targets DESTINATION lib)
+install(TARGETS c10_cuda EXPORT Caffe2Targets)
 
 endif()
 
diff --git a/c10/hip/CMakeLists.txt b/c10/hip/CMakeLists.txt
index ef24471dba8..a410383de27 100644
--- a/c10/hip/CMakeLists.txt
+++ b/c10/hip/CMakeLists.txt
@@ -56,7 +56,7 @@ if(NOT BUILD_LIBTORCHLESS)
       $<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/../..>
       $<BUILD_INTERFACE:${CMAKE_BINARY_DIR}>
       $<INSTALL_INTERFACE:include>)
-  install(TARGETS c10_hip EXPORT Caffe2Targets DESTINATION lib)
+  install(TARGETS c10_hip EXPORT Caffe2Targets)
   set(C10_HIP_LIB c10_hip)
 endif()
 
diff --git a/c10/xpu/CMakeLists.txt b/c10/xpu/CMakeLists.txt
index 95b9f031c3e..f1ce6d1ad14 100644
--- a/c10/xpu/CMakeLists.txt
+++ b/c10/xpu/CMakeLists.txt
@@ -46,7 +46,7 @@ if(NOT BUILD_LIBTORCHLESS)
       $<BUILD_INTERFACE:${CMAKE_BINARY_DIR}>
       $<INSTALL_INTERFACE:include>
       )
-  install(TARGETS c10_xpu EXPORT Caffe2Targets DESTINATION lib)
+  install(TARGETS c10_xpu EXPORT Caffe2Targets)
   set(C10_XPU_LIB c10_xpu)
   add_subdirectory(test)
 endif()
diff --git a/torch/lib/libshm_windows/CMakeLists.txt b/torch/lib/libshm_windows/CMakeLists.txt
index df2a1064938..5fa15e6be31 100644
--- a/torch/lib/libshm_windows/CMakeLists.txt
+++ b/torch/lib/libshm_windows/CMakeLists.txt
@@ -19,7 +19,7 @@ target_include_directories(shm PRIVATE
 target_link_libraries(shm torch c10)
 
 
-install(TARGETS shm DESTINATION "${LIBSHM_INSTALL_LIB_SUBDIR}")
+install(TARGETS shm)
 install(FILES libshm.h DESTINATION "include")
 
 if(MSVC AND BUILD_SHARED_LIBS)
-- 
2.45.2

