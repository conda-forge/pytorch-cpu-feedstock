From 3eec43b3b75d6d0a17184cf5b80767ab42b491f0 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Micha=C5=82=20G=C3=B3rny?= <mgorny@quansight.com>
Date: Thu, 23 Oct 2025 16:47:01 +0200
Subject: [PATCH] remove `DESTINATION lib` from CMake install directives
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Suggested-By: Silvio Traversaro <silvio@traversaro.it>
Original-author: H. Vetinari <h.vetinari@gmx.com>
Signed-off-by: Michał Górny <mgorny@quansight.com>
--- a/third_party/fbgemm/cmake/modules/CppLibrary.cmake
+++ b/third_party/fbgemm/cmake/modules/CppLibrary.cmake
@@ -196,18 +196,19 @@ function(cpp_library)
     ############################################################################
 
     if(args_DESTINATION)
-        set(lib_install_destination ${args_DESTINATION})
+        set(destinations
+            ARCHIVE DESTINATION ${args_DESTINATION}
+            LIBRARY DESTINATION ${args_DESTINATION}
+            # For Windows
+            RUNTIME DESTINATION ${args_DESTINATION})
     else()
-        set(lib_install_destination ${CMAKE_INSTALL_LIBDIR})
+        set(destinations)
     endif()
 
     install(
         TARGETS ${lib_name}
         EXPORT fbgemmLibraryConfig
-        ARCHIVE DESTINATION ${lib_install_destination}
-        LIBRARY DESTINATION ${lib_install_destination}
-        # For Windows
-        RUNTIME DESTINATION ${lib_install_destination})
+        ${destinations})
 
     ############################################################################
     # Set the Output Variable(s)
